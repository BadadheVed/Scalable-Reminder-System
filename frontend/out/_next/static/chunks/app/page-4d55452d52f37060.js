(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5531:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2265);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:u="",children:l,iconNode:i,...c},d)=>(0,a.createElement)("svg",{ref:d,...o,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:n("lucide",u),...c},[...i.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let r=(0,a.forwardRef)(({className:r,...o},l)=>(0,a.createElement)(u,{ref:l,iconNode:t,className:n(`lucide-${s(e)}`,r),...o}));return r.displayName=`${e}`,r}},3715:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7283:function(e,t,r){Promise.resolve().then(r.bind(r,7139))},7139:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(7437),s=r(2265),n=r(4033),o=r(220),u=r(3715);function l(){let{user:e,loading:t}=(0,o.useAuth)(),r=(0,n.useRouter)();return((0,s.useEffect)(()=>{t||(e?r.push("/dashboard"):r.push("/login"))},[e,t,r]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):null}},1045:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});var a=r(4829);let s=a.Z.create({baseURL:"http://localhost:8000",withCredentials:!0,headers:{"Content-Type":"application/json"}})},220:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return c},useAuth:function(){return i}});var a=r(7437),s=r(2265),n=r(4033),o=r(1045),u=r(1424);let l=(0,s.createContext)(null),i=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e},c=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),m=(0,n.useRouter)();(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{d(!0),f(null);let e=await o.b.get("/auth/me");e.data.success&&e.data.user?i(e.data.user):(i(null),f(e.data.message||"Failed to fetch user"))}catch(r){var e,t;i(null),f((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Authentication check failed"),console.error("Auth check error:",r)}finally{d(!1)}},v=async()=>{await g()},p=async(e,t)=>{var r,a,s;try{let a=await o.b.post("/api/auth/login",{email:e,password:t});if(a.data.success){let t={id:(null===(r=a.data.user)||void 0===r?void 0:r.id)||"",email:e,name:a.data.name,token:a.data.token};i(t),u.Am.success("Login successful!"),m.push("/dashboard")}else throw Error(a.data.message||"Login failed")}catch(t){let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Login failed. Please try again.";throw u.Am.error(e),t}},w=async(e,t,r)=>{try{let a=await o.b.post("/auth/signup",{email:t,password:r,name:e});if(a.data.success)u.Am.success("Account created successfully! Please sign in."),m.push("/login");else throw Error(a.data.message||"Signup failed")}catch(t){var a,s;let e=(null===(s=t.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Account creation failed. Please try again.";throw u.Am.error(e),t}},y=async()=>{try{await o.b.post("/api/auth/logout"),u.Am.success("Logged out successfully!")}catch(e){console.error("Logout error:",e),u.Am.error("Logout failed on server, but you have been logged out locally.")}finally{i(null),f(null),m.push("/login")}};return(0,a.jsx)(l.Provider,{value:{user:r,loading:c,error:h,login:p,signup:w,logout:y,setUser:i,refetchUser:v,updateUser:e=>{i(t=>t?{...t,...e}:null)}},children:t})}}},function(e){e.O(0,[385,971,864,744],function(){return e(e.s=7283)}),_N_E=e.O()}]);