(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4526:function(e,t,r){Promise.resolve().then(r.t.bind(r,8877,23)),Promise.resolve().then(r.bind(r,3256)),Promise.resolve().then(r.bind(r,220)),Promise.resolve().then(r.t.bind(r,3247,23))},1045:function(e,t,r){"use strict";r.d(t,{b:function(){return o}});var a=r(4829);let o=a.Z.create({baseURL:"http://localhost:8000",withCredentials:!0,headers:{"Content-Type":"application/json"}})},3256:function(e,t,r){"use strict";r.r(t),r.d(t,{Toaster:function(){return c}});var a=r(7437),o=r(2265),s=["light","dark"],n=o.createContext(void 0),l={setTheme:e=>{},themes:[]},u=()=>{var e;return null!=(e=o.useContext(n))?e:l};o.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:l,value:u,attrs:i,nonce:c})=>{let d="system"===l,m="class"===r?`var d=document.documentElement,c=d.classList;c.remove(${i.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=n?(s.includes(l)?l:null)?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(e,t=!1,a=!0)=>{let o=u?u[e]:e,l=t?e+"|| ''":`'${o}'`,i="";return n&&a&&!t&&s.includes(e)&&(i+=`d.style.colorScheme = '${e}';`),"class"===r?t||o?i+=`c.add(${l})`:i+="null":o&&(i+=`d[s](n,${l})`),i},g=e?`!function(){${m}${f(e)}}()`:a?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${u?`var x=${JSON.stringify(u)};`:""}${f(u?"x[e]":"e",!0)}}${d?"":"else{"+f(l,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${u?`var x=${JSON.stringify(u)};`:""}${f(u?"x[e]":"e",!0)}}else{${f(l,!1,!1)};}${h}}catch(t){}}();`;return o.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var i=r(1424);let c=e=>{let{...t}=e,{theme:r="system"}=u();return(0,a.jsx)(i.x7,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})}},220:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return c},useAuth:function(){return i}});var a=r(7437),o=r(2265),s=r(4033),n=r(1045),l=r(1424);let u=(0,o.createContext)(null),i=()=>{let e=(0,o.useContext)(u);if(!e)throw Error("useAuth must be used within AuthProvider");return e},c=e=>{let{children:t}=e,[r,i]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0),[m,h]=(0,o.useState)(null),f=(0,s.useRouter)();(0,o.useEffect)(()=>{g()},[]);let g=async()=>{try{d(!0),h(null);let e=await n.b.get("/auth/me");e.data.success&&e.data.user?i(e.data.user):(i(null),h(e.data.message||"Failed to fetch user"))}catch(r){var e,t;i(null),h((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Authentication check failed"),console.error("Auth check error:",r)}finally{d(!1)}},v=async()=>{await g()},p=async(e,t)=>{var r,a,o;try{let a=await n.b.post("/api/auth/login",{email:e,password:t});if(a.data.success){let t={id:(null===(r=a.data.user)||void 0===r?void 0:r.id)||"",email:e,name:a.data.name,token:a.data.token};i(t),l.Am.success("Login successful!"),f.push("/dashboard")}else throw Error(a.data.message||"Login failed")}catch(t){let e=(null===(o=t.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Login failed. Please try again.";throw l.Am.error(e),t}},y=async(e,t,r)=>{try{let a=await n.b.post("/auth/signup",{email:t,password:r,name:e});if(a.data.success)l.Am.success("Account created successfully! Please sign in."),f.push("/login");else throw Error(a.data.message||"Signup failed")}catch(t){var a,o;let e=(null===(o=t.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Account creation failed. Please try again.";throw l.Am.error(e),t}},b=async()=>{try{await n.b.post("/api/auth/logout"),l.Am.success("Logged out successfully!")}catch(e){console.error("Logout error:",e),l.Am.error("Logout failed on server, but you have been logged out locally.")}finally{i(null),h(null),f.push("/login")}};return(0,a.jsx)(u.Provider,{value:{user:r,loading:c,error:m,login:p,signup:y,logout:b,setUser:i,refetchUser:v,updateUser:e=>{i(t=>t?{...t,...e}:null)}},children:t})}},8877:function(){},3247:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[385,971,864,744],function(){return e(e.s=4526)}),_N_E=e.O()}]);